{"version":3,"sources":["modules/Socket/index.ts","modules/eventEmitter.tsx","modules/constant.ts","components/ChatBox/index.tsx","components/Tips/index.tsx","components/ToggleBtn/index.tsx","components/ParticipantsList/index.tsx","modules/TEngine/Tlights.ts","modules/TEngine/TEngine.ts","modules/HandAPI/gesture.ts","modules/HandAPI/HandAPI.ts","modules/TEngine/TTextures.ts","modules/TEngine/TBasicObject.ts","modules/TEngine/THelper.ts","modules/VoiceControlAPI/VCAPI.ts","modules/RTCEngine/RTCEngine.ts","App.tsx","utils.ts","Login.tsx","index.tsx"],"names":["socket","io","ee","require","CLIENT_USER_EVENT","SERVER_USER_EVENT","SIGNALING_OFFER","SIGNALING_ANSWER","SIGNALING_CANDIDATE","ChatBox","props","useState","sendMsgBySocket","payload","msg","type","emit","JSON","stringify","textBox","newMsgInfo","message","userName","isSelf","timeStamp","diva","document","createElement","divb","classList","add","className","setAttribute","Date","toTimeString","substr","appendChild","innerText","useEffect","msgBox","querySelector","on","now","scrollTop","scrollHeight","receiveNewMsg","console","log","removeAllListeners","name","contentEditable","onClick","inputText","textMsg","value","roomID","viewBox","version","xmlns","width","height","d","fill","Tips","ToggleBtn","id","e","checked","target","onToggle","l","r","ParticipantsList","participantsList","map","participants","toString","LightsList","ambientLight","AmbientLight","pointLight","PointLight","position","set","spotLight","SpotLight","Math","PI","castShadow","push","TEngine","dom","browserType","renderer","mixer","pmremGenerator","scene","raycaster","camera","clock","centralpoint","Vector2","controls","seatsPosition","x","y","z","userVideoBoxes","model","heart","VRviewBody","newEnterIndex","stats","this","WebGLRenderer","antialias","xr","enabled","Clock","shadowMap","toneMapping","LinearToneMapping","Scene","PMREMGenerator","compileEquirectangularShader","body","Object3D","RGBELoader","setDataType","UnsignedByteType","load","texture","envMap","fromEquirectangular","dispose","environment","background","PerspectiveCamera","offsetWidth","offsetHeight","setSize","Stats","statsDom","domElement","style","top","right","left","useorbit","OrbitControls","enableDamping","dampingFactor","screenSpacePanning","Vector3","maxPolarAngle","minPolarAngle","update","FirstPersonControls","lookSpeed","movementSpeed","constrainVertical","verticalMin","verticalMax","object","lookAt","up","Raycaster","onWindowResize","aspect","window","innerWidth","innerHeight","updateProjectionMatrix","addEventListener","setAnimationLoop","getDelta","render","TWEEN","updateUserVideoRotation","VRButton","createButton","cb","loader","GLTFLoader","gltf","traverse","isMesh","frustumCulled","material","emissive","color","emissiveMap","receiveShadow","scale","vr","remove","setFromCamera","targetName","intersects","intersectObjects","children","i","length","ObjectLoader","obj","forEach","elem","vb","index","cameraPosition","clone","videoPostion","rotY","atan","rotation","url","userVideo","geometry","PlaneGeometry","VideoTexture","format","RGBAFormat","MeshBasicMaterial","transparent","side","DoubleSide","needsUpdate","box","Mesh","videoName","filter","b","toneMappingExposure","from","to","find","mid","points","QuadraticBezierCurve3","getPoints","t","tweens","point","arr","onUpdate","p","pop","chain","animate","start","GestureRecognition","gestures","openPlam","hand","keypoints","xmean","keypoints3D","ymean","variance","pow","meanVariance","sqrt","handFeatures","gestureFeatures","B","featuresLength","A","C","D","hxmean","hymean","gxmean","gymean","HandAPI","handDetector","detectVideo","gestureRecognition","enable","a","handPoseDetection","MediaPipeHands","detectorConfig","runtime","modelType","detector","targetVideo","setInterval","estimateHands","hands","thumb_tip","index_finger_tip","textureLoader","TextureLoader","stageTexture","wrapS","RepeatWrapping","wrapT","repeat","wallTexture","basicObjectList","BoxBufferGeometry","MeshStandardMaterial","stage","metalness","roughness","PlaneBufferGeometry","rightWall","rotateY","southWall","helperList","AxesHelper","GridHelper","PointLightHelper","distance","SpotLightHelper","webkitSpeechRecognition","VCAPI","recognition","listenedEvent","stop","bindListening","keyword","callback","continuous","lang","interimResults","last_ten_words","onresult","resultIndex","str","results","transcript","len","some","indexOf","setTimeout","RTCEngine","peerList","videoList","local_video","is_audience","onnewuserenterroom","onnewvideoloaded","onuserleaveroom","onuserinteraction","data","parse","initRTC","onlineUsers","leaveName","handleReceiveOffer","handleReceiveAnswer","handleReceiveCandidate","onlineUser","rtcUserName","pc","createPeerConnection","mediaStream","srcObject","getTracks","track","addTrack","user_name","room_id","video","loginName","remoteUserName","RTCPeerConnection","username","credential","onnegotiationneeded","createOffer","offer","setLocalDescription","localDescription","sendRTCEvent","sdp","onicecandidate","evt","candidate","ontrack","remoteVideo","streams","muted","autoplay","playsInline","play","video_name","remoteDescription","remoteUser","setRemoteDescription","createAnswer","answer","signalingState","addIceCandidate","App","location","useLocation","state","isAudience","sceneList","setParticipantsList","curScene","setCurScene","createLocalVideo","humanseg","navigator","mediaDevices","getUserMedia","audio","mediastream","w","getVideoTracks","getSettings","h","hc","mc","bc","segment_video","captureStream","segment","onloadeddata","humanCanvas","maskCanvas","backgroundCanvas","cutout","requestAnimationFrame","client","u","Promise","resolve","reject","display","onclick","undefined","login","threeTarget","TE","loadRoom","addObject","loadLove","getCentralUser","startLove","changeScene","adjustBrightness","removeUserVideo","switchVRview","resultVideo","v","rv","displayCanvasEl","c","gl","getContext","vs","createShader","VERTEX_SHADER","shaderSource","compileShader","fs","FRAGMENT_SHADER","getElementById","prog","createProgram","attachShader","linkProgram","useProgram","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","coordLoc","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","activeTexture","TEXTURE0","tex","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","texLoc","getUniformLocation","texWidthLoc","texHeightLoc","requestVideoFrameCallback","processFrame","metadata","viewport","texImage2D","RGB","UNSIGNED_BYTE","uniform1i","uniform1f","drawArrays","TRIANGLE_FAN","cleanGreen","addUserVideo","keyCode","disableControls","enableControls","VC","hd","createDetector","bindVideo","onDetect","Object","keys","key","selected","contains","chatBoxDom","addSpace","listDom","BrowserType","ua","userAgent","toLowerCase","testUa","regexp","test","system","Login","useNavigate","placeholder","required","roomid","src","alt","href","ReactDOM","path","element"],"mappings":"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","file":"static/js/main.5b5f05a2.chunk.js","sourcesContent":["import { io } from \"socket.io-client\"\nconst socket = io(\"https://www.dramalf.xyz\")\n// const socket = io(\"http://localhost:8080\")\nexport default socket","const eventEmmiter = require('eventemitter3')\nconst ee = new eventEmmiter()\nexport default ee","export const CLIENT_RTC_EVENT = 'CLIENT_RTC_EVENT';\nexport const SERVER_RTC_EVENT = 'SERVER_RTC_EVENT';\n\nexport const CLIENT_USER_EVENT = 'CLIENT_USER_EVENT';\nexport const SERVER_USER_EVENT = 'SERVER_USER_EVENT';\n\nexport const CLIENT_USER_EVENT_LOGIN = 'CLIENT_USER_EVENT_LOGIN'; // 登录\nexport const CLIENT_USER_EVENT_INTERACTION='CLIENT_USER_EVENT_INTERACTION';\nexport const SERVER_USER_EVENT_UPDATE_USERS = 'SERVER_USER_EVENT_UPDATE_USERS';\n\nexport const CLIENT_USER_EVENT_SEND_MESSAGE=\"CLIENT_USER_EVENT_SEND_MESSAGE\"\nexport const SERVER_USER_EVENT_BROADCAST_MESSAGE= 'SERVER_USER_EVENT_BROADCAST_MESSAGE';\n\nexport const SIGNALING_OFFER = 'SIGNALING_OFFER';\nexport const SIGNALING_ANSWER = 'SIGNALING_ANSWER';\nexport const SIGNALING_CANDIDATE = 'SIGNALING_CANDIDATE';\n\n","import React, { useEffect,useState } from 'react'\nimport socket from '../../modules/Socket'\nimport TextMsgBox from './TextMsgBox'\nimport \"./index.css\"\nimport {\n    CLIENT_RTC_EVENT,\n    SERVER_RTC_EVENT,\n\n    CLIENT_USER_EVENT,\n    SERVER_USER_EVENT,\n    CLIENT_USER_EVENT_LOGIN,\n    SERVER_USER_EVENT_UPDATE_USERS,\n    CLIENT_USER_EVENT_SEND_MESSAGE,\n    SERVER_USER_EVENT_BROADCAST_MESSAGE,\n    SIGNALING_OFFER,\n    SIGNALING_ANSWER,\n    SIGNALING_CANDIDATE,\n} from '../../modules/constant'\ninterface ChatBoxProps {\n    userName: String\n}\nexport default function ChatBox(props: ChatBoxProps) {\n\n    const [msg_history,update_msg_history]=useState<any>([])\n\n    function sendUserEvent(msg: any) {\n        socket.emit(CLIENT_USER_EVENT, JSON.stringify(msg));\n    }\n\n    interface UserMsg {\n        userName: String,\n        message: String,\n        roomID: any\n    }\n    function sendMsgBySocket(payload: UserMsg) {\n        sendUserEvent({\n            type: CLIENT_USER_EVENT_SEND_MESSAGE,\n            payload\n        });\n    }\n\n\n    useEffect(() => {\n        const msgBox: HTMLElement | null = document.querySelector(\".chat-record-panel\")\n        function receiveNewMsg(payload:UserMsg) {\n            const {userName,message}=payload;\n            const newMsgInfo={\n                userName,\n                message,\n                isSelf:false,\n                timeStamp:Date.now()\n            };\n            (msgBox as HTMLElement).appendChild(textBox(newMsgInfo));\n            //update_msg_history([...msg_history,newMsgInfo]);\n             //(msgBox as HTMLElement).appendChild(msgBubbles(userName, message, false));\n             (msgBox as HTMLElement).scrollTop=(msgBox as HTMLElement).scrollHeight\n        }\n        socket.on(SERVER_USER_EVENT,(msg)=>{\n            const {type,payload}=msg\n            if(type===SERVER_USER_EVENT_BROADCAST_MESSAGE){\n                receiveNewMsg(payload)\n                console.log('revieve new msg')\n            }\n        })\n        return () => {\n            socket.removeAllListeners()\n      \n          }\n    },[])\n    function textBox(newMsgInfo:any){\n        const {\n            message,\n            userName,\n            isSelf,\n            timeStamp\n        }=newMsgInfo\n        let diva=document.createElement('div');\n        let divb=document.createElement('div');\n        diva.classList.add('msg-wrapper');\n       \n        divb.className=`message ${isSelf?'my-message':'other-message'}`;\n        divb.setAttribute('data-username',isSelf?'':userName);\n        divb.setAttribute('data-time',new Date(timeStamp).toTimeString().substr(0, 8));\n        diva.appendChild(divb);\n        divb.innerText=message;\n        return diva;\n\n    }\n    function sendTextMsg() {\n        const msgBox: HTMLElement | null = document.querySelector(\".chat-record-panel\")\n        const inputText: HTMLTextAreaElement | null = document.querySelector(\".input-panel textarea\")\n        const textMsg = (inputText as HTMLTextAreaElement).value\n        let roomId = 100\n\n        if (textMsg) {\n            //socket.emit(\"sendNewMsg\", textMsg, roomId);\n            const payload = {\n                userName: props.userName,\n                message: textMsg,\n                roomID: roomId\n            }\n            sendMsgBySocket(payload);\n            const newMsgInfo={\n                userName:props.userName,\n                message:textMsg,\n                isSelf:true,\n                timeStamp:Date.now()\n            };\n         \n            //update_msg_history([...msg_history,newMsgInfo]);\n             (msgBox as HTMLElement).appendChild(textBox(newMsgInfo));\n          \n            // (msgBox as HTMLElement).appendChild(msgBubbles(props.userName, textMsg, true) as unknown as Node);\n            (msgBox as HTMLElement).scrollTop=(msgBox as HTMLElement).scrollHeight;\n            (inputText as HTMLTextAreaElement).value = \"\"\n        }\n    }\n\n    return (\n        <div className=\"chat-box-wrapper\">\n            <div className=\"chat-record-panel\">\n                <h4>聊天</h4>\n              \n            </div>\n            <div className=\"send-msg-part\">\n                <div className=\"input-panel\">\n                    <textarea name=\"comment\" contentEditable={true} data-text=\"输入内容...\">\n                    </textarea>\n                </div>\n                <div className=\"send-msg-btn\" onClick={sendTextMsg}>\n                <svg  className=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2268\" width=\"200\" height=\"200\"><path d=\"M392.021333 925.013333a34.133333 34.133333 0 0 1-34.133333-34.133333V579.242667c0-10.24 4.608-19.968 12.629333-26.453334l276.48-224.085333a34.0992 34.0992 0 0 1 43.008 52.906667L426.154667 595.456v192.853333l82.944-110.592c10.069333-13.482667 28.672-17.578667 43.52-9.557333l137.557333 73.728L853.333333 156.16c3.242667-11.434667-3.413333-18.602667-6.485333-21.162667-3.072-2.56-11.093333-7.850667-21.845333-2.901333L206.336 422.4l80.213333 46.08c16.384 9.386667 22.016 30.208 12.629334 46.592s-30.208 22.016-46.592 12.629333l-137.045334-78.677333a33.979733 33.979733 0 0 1-17.066666-31.061333c0.512-12.8 8.021333-24.064 19.626666-29.525334L795.989333 70.314667c31.744-14.848 68.096-10.069333 94.890667 12.629333a87.790933 87.790933 0 0 1 28.16 91.477333L744.277333 801.28a34.082133 34.082133 0 0 1-48.981333 20.821333L546.133333 742.058667l-126.805333 169.301333c-6.656 8.704-16.896 13.653333-27.306667 13.653333z\" p-id=\"2269\" fill=\"#e6e6e6\"></path></svg>                </div>\n               \n            </div>\n        </div>\n    )\n}\n","import React from 'react'\nimport './index.css'\nfunction Tips(props:any) {\n    return (\n        <div className='tips-wrapper'>\n            <div className='tips-box'>\n                <h4>提示</h4>\n                <div\n                    className='info-box'> <div>会议期间会使用到您的摄像头或麦克风</div>\n                    <div>观众可以选择VR模式旁听会议</div>\n                    <div>声控和手势识别功能可根据个人需要和设备性能选择开启</div>\n                </div>\n                <div className='tips-enter-btn'>\n                    进入会议\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Tips","import React from 'react'\nimport './index.css'\nexport default function ToggleBtn(props:any) {\n    return (\n        <div className=\"button r\" id=\"button-9\">\n        <input type=\"checkbox\" className=\"checkbox\" onClick={(e)=>{\n            //@ts-ignore\n            let checked=e.target.checked;\n            props.onToggle(checked)\n        }}/>\n        <div className=\"knobs\" data-l={props.l} data-r={props.r}>\n          <span></span>\n        </div>\n        <div className=\"layer\"></div>\n      </div>\n    )\n}\n","import React from 'react'\nimport './index.css'\ninterface Iprops {\n    participantsList:Array<String>\n}\nexport default function ParticipantsList(props:Iprops) {\n    return (\n        <div className='user-list-wrapper'>\n            <h4>与会列表</h4>\n            <div className='user-list-box'>\n            {props.participantsList.map(participants=>{\n                return <div key={participants.toString()} data-name={participants}>{participants}</div>\n            })}\n            </div>\n          \n        </div>\n    )\n}\n","import {\n  AmbientLight,\n  Object3D,\n  PointLight,\n  SpotLight\n} from 'three'\n\nexport const LightsList: Object3D[] = []\n\nexport const ambientLight: AmbientLight = new AmbientLight('rgb(64,64,64)',0.2)\n\nexport const pointLight: PointLight = new PointLight(\n  'rgb(240, 225, 240)',\n  1\n)\n\npointLight.position.set(0, 20, 0)\n\nexport const spotLight: SpotLight = new SpotLight(\n  'rgb(255, 255, 255)',\n  1,\n  200,\n  Math.PI ,\n  0,\n  0\n)\n\nspotLight.castShadow = true\n\nspotLight.position.set(0, 200, 0)\n\n\n\nLightsList.push(spotLight,pointLight)","import {\n  AmbientLight,\n  AxesHelper,\n  BoxBufferGeometry,\n  GridHelper,\n  RGBAFormat,\n  TextureLoader,\n  ObjectLoader,\n  DoubleSide,\n  Mesh,\n  MeshStandardMaterial,\n  PerspectiveCamera,\n  Scene,\n  Vector2,\n  Vector3,\n  WebGLRenderer,\n  MOUSE,\n  Object3D,\n  Group,\n  Clock,\n  Raycaster,\n  TetrahedronBufferGeometry,\n  VideoTexture,\n  PMREMGenerator,\n  UnsignedByteType,\n  HemisphereLight,\n  CanvasTexture,\n  AnimationMixer,\n  MeshBasicMaterial,\n  PlaneGeometry,\n  CineonToneMapping,\n  LinearToneMapping,\n  QuadraticBezierCurve3\n} from \"three\"\nimport * as TWEEN from '@tweenjs/tween.js'\nimport Stats from 'three/examples/jsm/libs/stats.module'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport { FirstPersonControls } from 'three/examples/jsm/controls/FirstPersonControls'\nimport { PointerLockControls } from 'three/examples/jsm/controls/PointerLockControls'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader';\nimport { ambientLight } from './Tlights'\nimport { VRButton } from 'three/examples/jsm/webxr/VRButton.js';\n\nexport class TEngine {\n\n  private dom: HTMLElement\n  public renderer: WebGLRenderer\n  private mixer: AnimationMixer | undefined\n  private pmremGenerator: PMREMGenerator\n  private scene: Scene\n  private raycaster:Raycaster\n  private camera: PerspectiveCamera\n  private ambientLight: AmbientLight\n  private clock: Clock\n  private centralpoint=new Vector2(0,0)\n  private controls: FirstPersonControls | OrbitControls\n  private seatsPosition = [{\n   x: 0,\n    y: 29,\n    z: 20\n  }, {\n    x: -20,\n    y: 29,\n    z: -20\n  }, {\n    x: 0,\n    y: 29,\n    z: -20\n  }, {\n    x: 26,\n    y: 29,\n    z: -20\n  }, {\n    x: 38,\n    y: 29,\n    z: 0\n  }, {\n       x: -38,\n    y: 29,\n    z: 0\n  }\n\n  ]\n\n  private userVideoBoxes: Array<{ object: any, videoName: any }> = []\n  private model!: Group\n  private heart!: Group\n  private VRviewBody: Object3D\n  private newEnterIndex = 0\n  stats: Stats\n  constructor(dom: HTMLElement, enableVR = false, browserType: string) {\n    this.dom = dom\n    this.renderer = new WebGLRenderer({\n      antialias: true\n    })\n    this.renderer.xr.enabled = true;\n    this.clock = new Clock()\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.toneMapping = LinearToneMapping\n    this.ambientLight = ambientLight;\n    this.scene = new Scene()\n    this.scene.add(this.ambientLight);\n    const pmremGenerator = new PMREMGenerator(this.renderer); // 使用hdr作为背景色\n    pmremGenerator.compileEquirectangularShader();\n    this.pmremGenerator = pmremGenerator;\n    const scene = this.scene;\n    const body = new Object3D();\n\n    body.position.set(0, 28, 0);\n    this.VRviewBody = body;\n    new RGBELoader()\n      .setDataType(UnsignedByteType)\n      .load('/texture/autumn_forest_04_1k.hdr', function (texture) {\n        const envMap = pmremGenerator.fromEquirectangular(texture).texture;\n        // envMap.isPmremTexture = true;\n        pmremGenerator.dispose();\n        console.log('here');\n        scene.environment = envMap; // 给场景添加环境光效果\n        scene.background = envMap; // 给场景添加背景图\n      }, () => { }, (e) => { console.log('error in load env_texture', e); });\n\n    this.camera = new PerspectiveCamera(60, dom.offsetWidth / dom.offsetHeight, 1, 1000)\n\n    \n\n    this.renderer.setSize(dom.offsetWidth, dom.offsetHeight, true)\n\n    // 初始性能监视器\n    const stats = Stats()\n    const statsDom = stats.domElement\n    this.stats = stats;\n    statsDom.style.position = 'fixed'\n    statsDom.style.top = '0'\n    statsDom.style.right = '5px'\n    statsDom.style.left = 'unset'\n\n\n\n    let controls;\n    let useorbit = browserType === 'oculus' || browserType === 'android' || browserType === 'ios'\n\n    if (useorbit) {\n      controls = new OrbitControls(this.camera, this.dom);\n      controls.enableDamping = true;\n      controls.dampingFactor = 0.05;\n      controls.screenSpacePanning = false;\n      controls.target = new Vector3(0, 28, 0)\n      controls.maxPolarAngle = Math.PI / 2 + 0.001;\n      controls.minPolarAngle = Math.PI / 2;\n      controls.update()\n    } else {\n      controls = new FirstPersonControls(this.camera, this.dom);\n      controls.lookSpeed = 0.2; //鼠标移动查看的速度\n      controls.movementSpeed = 20; //相机移动速度\n      // controls.noFly = true;\n      controls.constrainVertical = true; //约束垂直\n      controls.verticalMin = Math.PI / 2;\n\n      controls.verticalMax = Math.PI / 2 + 0.0000001;\n    }\n\n    this.controls = controls\n\n    this.controls.object.position.set(0, 28, 20)\n    this.controls.object.lookAt(new Vector3(0, 0, 0))\n\n    this.camera.up = new Vector3(0, 1, 0)\n    //@ts-ignore\n    useorbit && this.controls.update();\n    const raycaster = new Raycaster();\n    this.raycaster=raycaster;\n    const onWindowResize = () => {\n\n      this.camera.aspect = window.innerWidth / window.innerHeight;\n      this.camera.updateProjectionMatrix();\n\n      this.renderer.setSize(dom.offsetWidth, dom.offsetHeight, true);\n\n    }\n    window.addEventListener('resize', onWindowResize);\n\n    //     const renderFun = () => {\n    // //@ts-ignore\n    //       this.controls.update(this.clock.getDelta())\n    //       this.renderer.render(this.scene, this.camera)\n    //       stats.update()\n    //       TWEEN.update();\n    //      updateUserVideoRotation()\n    //       requestAnimationFrame(renderFun)\n    //     }\n    //this.renderid=requestAnimationFrame(this.renderFun);\n\n    this.renderer.setAnimationLoop(() => {\n      !useorbit && this.controls.update(this.clock.getDelta())\n      useorbit && (this.controls as OrbitControls).update()\n      this.renderer.render(this.scene, this.camera)\n      stats.update()\n      TWEEN.update();\n      this.updateUserVideoRotation()\n    })\n\n\n\n    dom.appendChild(this.renderer.domElement)\n    dom.appendChild(statsDom)\n    dom.appendChild(VRButton.createButton(this.renderer))\n  }\n\n  loadRoom(cb = () => { }) {\n    //载入模型\n    const loader: GLTFLoader = new GLTFLoader()\n\n    loader.load('/models/table/scene.gltf', (gltf) => {\n\n      // this.mixer= new AnimationMixer(gltf.scene)\n      // var action=this.mixer.clipAction(gltf.animations[0])\n      // // action.timeScale=0.8\n      // action.time=4\n      gltf.scene.traverse((object) => {\n        if ((object as Mesh).isMesh) {\n          // 修改模型的材质\n          object.castShadow = true;\n          object.frustumCulled = false;\n          // object.receiveShadow = true;\n\n          (object as any).material.emissive = (object as any).material.color;\n          (object as any).material.emissiveMap = (object as any).material.map;\n        }\n      })\n      gltf.scene.receiveShadow = true\n      this.model = gltf.scene\n      this.scene.add(gltf.scene)\n      gltf.scene.position.set(0, 0, 0)\n      gltf.scene.scale.set(0.3, 0.3, 0.3)\n      cb();\n    }, () => { }, (e) => { console.log(\"error\", e) })\n\n  }\n  switchVRview(vr:boolean){\n    if(vr){\n      this.VRviewBody.add(this.camera)\n    }else{\n      this.VRviewBody.remove(this.camera)\n    }\n    \n  }\n  getCentralUser(){\n   \n    this.raycaster.setFromCamera(this.centralpoint,this.camera);\n    const intersects = this.raycaster.intersectObjects( this.scene.children );\n    let targetName;\n    for ( let i = 0; i < intersects.length; i ++ ) {\n      targetName=intersects[i].object.name\n    }\n    return targetName\n  \n\n  }\n  load_sprite() {\n    const loader = new ObjectLoader()\n    console.log('120')\n    loader.load('/models/sprite/sprite.json', (obj) => {\n      this.scene.add(obj)\n      obj.position.set(-29, 30, -20)\n      obj.scale.set(10, 10, 10)\n      console.log(obj, 120)\n      // this.mixer= new AnimationMixer(gltf.scene)\n      // var action=this.mixer.clipAction(gltf.animations[0])\n      // // action.timeScale=0.8\n      // action.time=4\n\n    }, () => { }, (e) => { console.log(\"error\", e) })\n\n  }\n  addObject(...object: Object3D[]) {\n    object.forEach(elem => {\n      this.scene.add(elem)\n    })\n  }\n  updateUserVideoRotation() {\n\n    this.userVideoBoxes.map((vb, index) => {\n      if (!vb) return\n      const { object } = vb\n      const cameraPosition = this.camera.position.clone()\n\n      const videoPostion = object.position.clone()\n      //const rotY=-Math.atan(lookAtPosition.x/lookAtPosition.z)-Math.PI/2\n      const rotY = Math.atan((videoPostion.x - cameraPosition.x) / (videoPostion.z - cameraPosition.z))\n\n      object.rotation.y = rotY\n\n    })\n  }\n\n  changeScene(url: string) {\n    new RGBELoader()\n      .setDataType(UnsignedByteType)\n      .load(`/texture/${url}.hdr`, (texture) => {\n        const envMap = this.pmremGenerator.fromEquirectangular(texture).texture;\n        // envMap.isPmremTexture = true;\n        this.pmremGenerator.dispose();\n        this.scene.environment = envMap; // 给场景添加环境光效果\n        this.scene.background = envMap; // 给场景添加背景图\n      }, () => { }, (e) => { console.log('123,', e); });\n\n  }\n  addUserVideo(userVideo: HTMLVideoElement, userName: string) {\n    var geometry = new PlaneGeometry(48, 36, 96, 72);\n    const texture = new VideoTexture(userVideo);\n    texture.format = RGBAFormat;\n    const material = new MeshBasicMaterial({\n      map: texture,\n      transparent: true,\n      side: DoubleSide\n    })\n    material.needsUpdate = true\n    const box = new Mesh(geometry, material)\n    box.name=userName\n    const { x, y, z } = this.seatsPosition[this.newEnterIndex]\n    this.newEnterIndex++;\n    box.position.set(x, y, z)\n\n    box.scale.set(0.4, 0.4, 0.4)\n    //box.rotateY(-Math.PI/3)\n\n    //let cameraPosition=this.camera.position.clone()\n    this.userVideoBoxes.push({\n      object: box,\n      videoName: userName\n    })\n    this.scene.add(box);\n  }\n  removeUserVideo(userName: string) {\n    this.userVideoBoxes = this.userVideoBoxes.filter(b => {\n      if (b.videoName === userName) {\n        console.log('997', b);\n        b.object.material.dispose();\n        b.object.geometry.dispose();\n        this.scene.remove(b.object);\n\n      }\n      return b.videoName !== userName\n    })\n  }\n  adjustBrightness(type: string) {\n    if (type === 'brighter') {\n      console.log('亮一点')\n      this.renderer.toneMappingExposure += 0.1\n    } else {\n      console.log('暗一点')\n      this.renderer.toneMappingExposure -= 0.1\n    }\n  }\n\n  startLove(from:string,to:string) {\n    const heart = this.heart.clone();\n    this.scene.add(heart)\n   \n    let position = this.userVideoBoxes.find(b=>b.videoName===from)?.object.position.clone()\n\n   let target = this.userVideoBoxes.find(b=>b.videoName===to)?.object.position.clone()\n   if(from===\"&&SELF\"){\n    position=this.camera.position.clone()\n   } \n   if(!position||!target)return\n   position.y=24;\n   target.y=24;\n   const mid = new Vector3(position.x/2-target.x/2-2, 32, position.z/2-target.z/2-6);\n    //   x: -38,\n    // y: 29,\n    // z: 0\n    const curve = new QuadraticBezierCurve3(\n      position,\n      mid,\n      target\n    )\n    const points = curve.getPoints(50);\n    let scene=this.scene;\n    function animate(points: Vector3[]) {\n      let i = 0;\n      let tween1;\n      let tweens = points.map((point, index, arr) => {\n        if (index < points.length - 2) {\n          let t = new TWEEN.Tween(point).to(arr[index + 1], 10);\n          t.onUpdate((p) => {\n            heart.position.set(p.x, p.y, p.z);\n          })\n          return t\n        }else if(index===points.length-2){\n          let t= new TWEEN.Tween(point).to(arr[index + 1], 10);\n          t.onUpdate(()=>{\n            scene.remove(heart)\n          })\n          return t\n        }\n\n      });\n\n      tweens.pop()\n      for (let i = 0; i < points.length - 1; i++) {\n        if (tweens[i + 1] && tweens[i])\n          //@ts-ignore\n          tweens[i].chain(tweens[i + 1] as TWEEN.Tween<Vector3>)\n      }\n      //@ts-ignore\n      return tweens[0]\n    }\n    let t = animate(points);\n\n    t?.start()\n  }\n  loadLove() {\n    const loader: GLTFLoader = new GLTFLoader()\n\n    loader.load('/models/heart_in_love/scene.gltf', (gltf) => {\n\n      // this.mixer= new AnimationMixer(gltf.scene)\n      // var action=this.mixer.clipAction(gltf.animations[0])\n      // // action.timeScale=0.8\n      // action.time=4\n      gltf.scene.traverse((object) => {\n        if ((object as Mesh).isMesh) {\n          // 修改模型的材质\n          object.castShadow = true;\n          object.frustumCulled = false;\n          // object.receiveShadow = true;\n\n          (object as any).material.emissive = (object as any).material.color;\n          (object as any).material.emissiveMap = (object as any).material.map;\n        }\n      })\n      gltf.scene.receiveShadow = true\n      this.heart = gltf.scene\n      // this.scene.add(gltf.scene)\n      // gltf.scene.position.set(30, 30, 30)\n      gltf.scene.scale.set(0.01, 0.01, 0.01)\n    }, () => { }, (e) => { console.log(\"error\", e) })\n  }\n\n  disableControls() {\n    this.controls.enabled = false\n  }\n  enableControls() {\n    this.controls.enabled = true\n  }\n}\n","\n\nexport class GestureRecognition {\n    public gestures = {\n        openPlam: { \"keypoints\": [{ \"x\": 527.9091230562565, \"y\": 521.0406841419879, \"name\": \"wrist\" }, { \"x\": 456.2807815622871, \"y\": 503.0127886486822, \"name\": \"thumb_cmc\" }, { \"x\": 409.9258107905914, \"y\": 453.83136706486096, \"name\": \"thumb_mcp\" }, { \"x\": 399.9838723622642, \"y\": 397.80269690754363, \"name\": \"thumb_ip\" }, { \"x\": 404.2601322964012, \"y\": 352.733005759806, \"name\": \"thumb_tip\" }, { \"x\": 391.89745346202676, \"y\": 424.9564693061705, \"name\": \"index_finger_mcp\" }, { \"x\": 330.8528899353995, \"y\": 344.57204064346183, \"name\": \"index_finger_pip\" }, { \"x\": 292.0213106618285, \"y\": 286.5198725763419, \"name\": \"index_finger_dip\" }, { \"x\": 257.8089845653416, \"y\": 239.55721912145168, \"name\": \"index_finger_tip\" }, { \"x\": 449.7284131728093, \"y\": 416.88567083621336, \"name\": \"middle_finger_mcp\" }, { \"x\": 433.10611425385207, \"y\": 287.9674767660912, \"name\": \"middle_finger_pip\" }, { \"x\": 419.0225843013024, \"y\": 203.85083349289098, \"name\": \"middle_finger_dip\" }, { \"x\": 404.1351913134992, \"y\": 143.48506497753527, \"name\": \"middle_finger_tip\" }, { \"x\": 514.0518507153616, \"y\": 419.37081567152734, \"name\": \"ring_finger_mcp\" }, { \"x\": 537.2266617051833, \"y\": 294.9893689874851, \"name\": \"ring_finger_pip\" }, { \"x\": 538.0877401382181, \"y\": 210.49916531436995, \"name\": \"ring_finger_dip\" }, { \"x\": 537.3729875673654, \"y\": 148.6602971411435, \"name\": \"ring_finger_tip\" }, { \"x\": 568.5880405624539, \"y\": 430.1912609597638, \"name\": \"pinky_finger_mcp\" }, { \"x\": 595.80688016865, \"y\": 379.5906582307573, \"name\": \"pinky_finger_pip\" }, { \"x\": 606.4642624396802, \"y\": 380.4839605696293, \"name\": \"pinky_finger_dip\" }, { \"x\": 615.8822669063884, \"y\": 381.99105962903826, \"name\": \"pinky_finger_tip\" }], \"keypoints3D\": [{ \"x\": 0.024291463976102275, \"y\": 0.04706618694861017, \"z\": 0.0684986561536789, \"name\": \"wrist\" }, { \"x\": 0.0013181784842062321, \"y\": 0.02858571814555528, \"z\": 0.04906672239303589, \"name\": \"thumb_cmc\" }, { \"x\": -0.00792290007287188, \"y\": 0.014263559570490181, \"z\": 0.03756839036941528, \"name\": \"thumb_mcp\" }, { \"x\": -0.009724975250556002, \"y\": -0.001968791059482895, \"z\": 0.006983112543821335, \"name\": \"thumb_ip\" }, { \"x\": -0.009035289177010554, \"y\": -0.01704422039573432, \"z\": -0.007673956453800201, \"name\": \"thumb_tip\" }, { \"x\": -0.009226183238666983, \"y\": 0.006526046040007371, \"z\": -0.0012988932430744171, \"name\": \"index_finger_mcp\" }, { \"x\": -0.035690459548791506, \"y\": -0.010919095394759737, \"z\": -0.005468373186886311, \"name\": \"index_finger_pip\" }, { \"x\": -0.050869090878542855, \"y\": -0.028686547686333212, \"z\": -0.019602525979280472, \"name\": \"index_finger_dip\" }, { \"x\": -0.061546791711189125, \"y\": -0.0428273248678893, \"z\": -0.03161431849002838, \"name\": \"index_finger_tip\" }, { \"x\": -0.003312389026670696, \"y\": 0.004445856054086265, \"z\": 0.0008503459393978119, \"name\": \"middle_finger_mcp\" }, { \"x\": -0.01247337094911538, \"y\": -0.027892787967230867, \"z\": -0.009020786732435226, \"name\": \"middle_finger_pip\" }, { \"x\": -0.018162415088423537, \"y\": -0.05029917813544822, \"z\": -0.015433765947818756, \"name\": \"middle_finger_dip\" }, { \"x\": -0.032113432185902825, \"y\": -0.07820429470056996, \"z\": -0.004696410149335861, \"name\": \"middle_finger_tip\" }, { \"x\": 0.00983112498225417, \"y\": -0.007950719871017985, \"z\": -0.001078881323337555, \"name\": \"ring_finger_mcp\" }, { \"x\": 0.010367577791061313, \"y\": -0.029685706562936648, \"z\": 0.002013266086578369, \"name\": \"ring_finger_pip\" }, { \"x\": 0.013941904876090962, \"y\": -0.06440187171550504, \"z\": 0.001839280128479004, \"name\": \"ring_finger_dip\" }, { \"x\": 0.013301820163690255, \"y\": -0.08799677484684626, \"z\": -0.0029235854744911194, \"name\": \"ring_finger_tip\" }, { \"x\": 0.022169293997946912, \"y\": -0.0007543127232017416, \"z\": 0.009144721552729607, \"name\": \"pinky_finger_mcp\" }, { \"x\": 0.026750486362560964, \"y\": -0.005371706799819841, \"z\": 0.011953644454479218, \"name\": \"pinky_finger_pip\" }, { \"x\": 0.02917335594483131, \"y\": -0.008743876222298233, \"z\": 0.013476628810167313, \"name\": \"pinky_finger_dip\" }, { \"x\": 0.03338556358486299, \"y\": -0.0018176424280466272, \"z\": 0.0139746880158782, \"name\": \"pinky_finger_tip\" }], \"handedness\": \"Left\", \"score\": 0.9569462537765503 }\n    }\n    normalize(hand: any) {\n        const { keypoints, keypoints3D } = hand;\n        let xmean = 0, ymean = 0;\n        keypoints.map((point: { x: number; y: number; }) => {\n            xmean += point.x;\n            ymean += point.y;\n\n        });\n        xmean = xmean / keypoints.length;\n        ymean = ymean / keypoints.length;\n       // console.log(`mean>>  (${xmean},${ymean})`);\n        let variance = 0;\n        keypoints.map((point: { x: number; y: number; }) => {\n            variance += (Math.pow(point.x - xmean, 2) + Math.pow(point.y - ymean, 2))\n        })\n        variance = variance / keypoints.length\n        //console.log('variance>>  ', variance);\n        let meanVariance = Math.sqrt(variance)\n        //console.log('MeanVariance>>  ', meanVariance);\n        let result = keypoints.map((point: { x: number; y: number; }) => {\n            return {\n                x: (point.x - xmean) / meanVariance,\n                y: (point.y - ymean) / meanVariance,\n            }\n        })\n       return result;\n    }\n    calcCorrelation(handFeatures:any,gestureFeatures:any){\n        let cov:any;\n        let featuresLength=handFeatures.length\n        let A=0,B=0,C=0,D=0,E=0\n        for(let i=0;i<featuresLength;i++){\n            A+=handFeatures[i].x*gestureFeatures[i].x+handFeatures[i].y*gestureFeatures[i].y ;\n            C+=handFeatures[i].x*handFeatures[i].x+handFeatures[i].y*handFeatures[i].y;\n            D+=gestureFeatures[i].x*gestureFeatures[i].x+gestureFeatures[i].y*gestureFeatures[i].y;\n        }\n        A=featuresLength*A;\n\n        let hxmean = 0, hymean = 0;\n        handFeatures.map((point: { x: number; y: number; }) => {\n            hxmean += point.x;\n            hymean += point.y;\n\n        });\n        // hxmean = hxmean / featuresLength;\n        // hymean = hymean / featuresLength;\n        let gxmean = 0, gymean = 0;\n        gestureFeatures.map((point: { x: number; y: number; }) => {\n            gxmean += point.x;\n            gymean += point.y;\n\n        });\n        B=hxmean*gxmean+hymean*gymean;\n        C=Math.sqrt(C-hxmean*hxmean-hymean*hymean)\n        D=Math.sqrt(D-gxmean*gxmean-gymean*gymean)\n        console.log((A-B)/(C*D))\n        // gxmean = gxmean / featuresLength;\n        // gymean = gymean / featuresLength;\n        // for(let i=0;i<featuresLength;i++){\n        //     cov=(handFeatures[i].x-hxmean)*(gestureFeatures[i].x-gxmean)+(handFeatures[i].y-hymean)*(gestureFeatures[i].y-gymean);\n        // }\n        // cov=cov/featuresLength\n        // let deviationHand=0,deviationGesture=0;\n        // for(let i=0;i<featuresLength;i++){\n        //     deviationHand+=Math.pow(handFeatures[i].x-hxmean,2)+Math.pow(handFeatures[i].y-hymean,2);\n        //     deviationGesture+=Math.pow(gestureFeatures[i].x-gxmean,2)+Math.pow(gestureFeatures[i].y-gymean,2);\n        // }\n        // deviationHand=Math.sqrt(deviationHand/featuresLength)\n        // deviationGesture=Math.sqrt(deviationGesture/featuresLength)\n\n        // console.log(cov/deviationHand/deviationGesture)\n    }\n}\n// export const json = [{ \"keypoints\": [{ \"x\": 527.9091230562565, \"y\": 521.0406841419879, \"name\": \"wrist\" }, { \"x\": 456.2807815622871, \"y\": 503.0127886486822, \"name\": \"thumb_cmc\" }, { \"x\": 409.9258107905914, \"y\": 453.83136706486096, \"name\": \"thumb_mcp\" }, { \"x\": 399.9838723622642, \"y\": 397.80269690754363, \"name\": \"thumb_ip\" }, { \"x\": 404.2601322964012, \"y\": 352.733005759806, \"name\": \"thumb_tip\" }, { \"x\": 391.89745346202676, \"y\": 424.9564693061705, \"name\": \"index_finger_mcp\" }, { \"x\": 330.8528899353995, \"y\": 344.57204064346183, \"name\": \"index_finger_pip\" }, { \"x\": 292.0213106618285, \"y\": 286.5198725763419, \"name\": \"index_finger_dip\" }, { \"x\": 257.8089845653416, \"y\": 239.55721912145168, \"name\": \"index_finger_tip\" }, { \"x\": 449.7284131728093, \"y\": 416.88567083621336, \"name\": \"middle_finger_mcp\" }, { \"x\": 433.10611425385207, \"y\": 287.9674767660912, \"name\": \"middle_finger_pip\" }, { \"x\": 419.0225843013024, \"y\": 203.85083349289098, \"name\": \"middle_finger_dip\" }, { \"x\": 404.1351913134992, \"y\": 143.48506497753527, \"name\": \"middle_finger_tip\" }, { \"x\": 514.0518507153616, \"y\": 419.37081567152734, \"name\": \"ring_finger_mcp\" }, { \"x\": 537.2266617051833, \"y\": 294.9893689874851, \"name\": \"ring_finger_pip\" }, { \"x\": 538.0877401382181, \"y\": 210.49916531436995, \"name\": \"ring_finger_dip\" }, { \"x\": 537.3729875673654, \"y\": 148.6602971411435, \"name\": \"ring_finger_tip\" }, { \"x\": 568.5880405624539, \"y\": 430.1912609597638, \"name\": \"pinky_finger_mcp\" }, { \"x\": 595.80688016865, \"y\": 379.5906582307573, \"name\": \"pinky_finger_pip\" }, { \"x\": 606.4642624396802, \"y\": 380.4839605696293, \"name\": \"pinky_finger_dip\" }, { \"x\": 615.8822669063884, \"y\": 381.99105962903826, \"name\": \"pinky_finger_tip\" }], \"keypoints3D\": [{ \"x\": 0.024291463976102275, \"y\": 0.04706618694861017, \"z\": 0.0684986561536789, \"name\": \"wrist\" }, { \"x\": 0.0013181784842062321, \"y\": 0.02858571814555528, \"z\": 0.04906672239303589, \"name\": \"thumb_cmc\" }, { \"x\": -0.00792290007287188, \"y\": 0.014263559570490181, \"z\": 0.03756839036941528, \"name\": \"thumb_mcp\" }, { \"x\": -0.009724975250556002, \"y\": -0.001968791059482895, \"z\": 0.006983112543821335, \"name\": \"thumb_ip\" }, { \"x\": -0.009035289177010554, \"y\": -0.01704422039573432, \"z\": -0.007673956453800201, \"name\": \"thumb_tip\" }, { \"x\": -0.009226183238666983, \"y\": 0.006526046040007371, \"z\": -0.0012988932430744171, \"name\": \"index_finger_mcp\" }, { \"x\": -0.035690459548791506, \"y\": -0.010919095394759737, \"z\": -0.005468373186886311, \"name\": \"index_finger_pip\" }, { \"x\": -0.050869090878542855, \"y\": -0.028686547686333212, \"z\": -0.019602525979280472, \"name\": \"index_finger_dip\" }, { \"x\": -0.061546791711189125, \"y\": -0.0428273248678893, \"z\": -0.03161431849002838, \"name\": \"index_finger_tip\" }, { \"x\": -0.003312389026670696, \"y\": 0.004445856054086265, \"z\": 0.0008503459393978119, \"name\": \"middle_finger_mcp\" }, { \"x\": -0.01247337094911538, \"y\": -0.027892787967230867, \"z\": -0.009020786732435226, \"name\": \"middle_finger_pip\" }, { \"x\": -0.018162415088423537, \"y\": -0.05029917813544822, \"z\": -0.015433765947818756, \"name\": \"middle_finger_dip\" }, { \"x\": -0.032113432185902825, \"y\": -0.07820429470056996, \"z\": -0.004696410149335861, \"name\": \"middle_finger_tip\" }, { \"x\": 0.00983112498225417, \"y\": -0.007950719871017985, \"z\": -0.001078881323337555, \"name\": \"ring_finger_mcp\" }, { \"x\": 0.010367577791061313, \"y\": -0.029685706562936648, \"z\": 0.002013266086578369, \"name\": \"ring_finger_pip\" }, { \"x\": 0.013941904876090962, \"y\": -0.06440187171550504, \"z\": 0.001839280128479004, \"name\": \"ring_finger_dip\" }, { \"x\": 0.013301820163690255, \"y\": -0.08799677484684626, \"z\": -0.0029235854744911194, \"name\": \"ring_finger_tip\" }, { \"x\": 0.022169293997946912, \"y\": -0.0007543127232017416, \"z\": 0.009144721552729607, \"name\": \"pinky_finger_mcp\" }, { \"x\": 0.026750486362560964, \"y\": -0.005371706799819841, \"z\": 0.011953644454479218, \"name\": \"pinky_finger_pip\" }, { \"x\": 0.02917335594483131, \"y\": -0.008743876222298233, \"z\": 0.013476628810167313, \"name\": \"pinky_finger_dip\" }, { \"x\": 0.03338556358486299, \"y\": -0.0018176424280466272, \"z\": 0.0139746880158782, \"name\": \"pinky_finger_tip\" }], \"handedness\": \"Left\", \"score\": 0.9569462537765503 }]","import * as handPoseDetection from '@tensorflow-models/hand-pose-detection';\nimport '@tensorflow/tfjs-backend-webgl';\nimport { GestureRecognition } from './gesture';\n\nexport class HandAPI {\n    private handDetector!: handPoseDetection.HandDetector;\n    private detectVideo!: HTMLVideoElement;\n    private gestureRecognition = new GestureRecognition()\n    public enable=false;\n    async createDetector() {\n        console.log(this.gestureRecognition)\n        const model = handPoseDetection.SupportedModels.MediaPipeHands;\n        const detectorConfig: handPoseDetection.MediaPipeHandsMediaPipeModelConfig | handPoseDetection.MediaPipeHandsTfjsModelConfig | undefined = {\n            runtime: 'tfjs', // or 'tfjs'\n            modelType: 'full'\n        };\n        const detector = await handPoseDetection.createDetector(model, detectorConfig);\n        this.handDetector = detector;\n        console.log(detector)\n        return this\n    }\n    bindVideo(targetVideo: HTMLVideoElement) {\n        this.detectVideo = targetVideo\n        return this\n    }\n    onDetect(cb=()=>{}) {\n         setInterval(async () => {\n             if(!this.enable){\n                return \n             }\n            let hands = await this.handDetector.estimateHands(this.detectVideo);\n            if (hands[0]) {\n                // console.log('3d996',hands[0].keypoints3D![4],hands[0].keypoints3D![8])\n\n                let thumb_tip = hands[0].keypoints3D![3];\n                let index_finger_tip = hands[0].keypoints3D![7];\n                let d = Math.sqrt(Math.pow((thumb_tip.x - index_finger_tip.x), 2) + Math.pow((thumb_tip.y - index_finger_tip.y), 2))\n                console.log(d)\n                if (d < 0.05) {\n                    console.log('比心')\n                    cb()\n                }\n            }\n\n            //    hands.map(hand=>{\n            //     let norhand=this.gestureRecognition.normalize(hand)\n\n            //     let norgesture=this.gestureRecognition.normalize(this.gestureRecognition.gestures.openPlam)\n            //     console.log(norhand,norgesture)\n            //     this.gestureRecognition.calcCorrelation(norhand,norgesture)\n            //    })\n        }, 30)\n    }\n}","import { Texture, TextureLoader,RepeatWrapping } from \"three\";\n\nconst textureLoader: TextureLoader = new TextureLoader()\n\nexport const stageTexture: Texture = textureLoader.load('./texture/wood.jpeg')\nstageTexture.wrapS = RepeatWrapping;\nstageTexture.wrapT = RepeatWrapping;\nstageTexture.repeat.set( 10, 4 );\n\nexport const wallTexture: Texture = textureLoader.load('./texture/wall2.jpg')\nwallTexture.wrapS = RepeatWrapping;\nwallTexture.wrapT = RepeatWrapping;\nwallTexture.repeat.set( 10, 4 );","import {\n  Mesh,\n  BoxBufferGeometry,\n  MeshStandardMaterial,\n  SphereBufferGeometry,\n  CylinderBufferGeometry,\n  Object3D,\n  Line,\n  Points,\n  PointsMaterial,\n  Material,\n  PlaneBufferGeometry,\n  DoubleSide,\n  CircleBufferGeometry\n} from 'three'\nimport { stageTexture,wallTexture } from './TTextures'\n\nexport const basicObjectList: Object3D[] = []\nexport const body:Mesh=new Mesh(\n  new BoxBufferGeometry(10, 20, 10),\n  new MeshStandardMaterial({\n    map:stageTexture\n  })\n);\nbody.position.x=0;\n// 地面\nconst stage: Mesh = new Mesh(\n  new BoxBufferGeometry(200, 10, 200),\n  new MeshStandardMaterial({\n    map:stageTexture\n  })\n)\n\nstage.castShadow = true\nstage.receiveShadow = true\n\nstage.position.y = -5\n\n// 立方体\nconst box: Mesh = new Mesh(\n  new BoxBufferGeometry(2, 10, 2),\n  new MeshStandardMaterial({\n    color: '#b57355',\n    metalness:0.5,\n    roughness: 0.3\n  })\n)\n\nbox.castShadow = true\nbox.receiveShadow = true\n\nbox.position.set(-10,5,-10)\n\n\n//墙壁\nconst leftWall:Mesh=new Mesh(\n  new PlaneBufferGeometry(100, 40),\n  new MeshStandardMaterial({\n    map:wallTexture,\n    side:DoubleSide\n  })\n)\nleftWall.position.set(0,20,-50)\n\nconst rightWall:Mesh=new Mesh(\n  new PlaneBufferGeometry(100, 40),\n  new MeshStandardMaterial({\n   map:wallTexture,\n   side:DoubleSide\n  })\n)\nrightWall.rotateY(Math.PI/2)\nrightWall.position.set(-50,20,0)\n\nconst southWall:Mesh=new Mesh(\n  new PlaneBufferGeometry(100, 40),\n  new MeshStandardMaterial({\n   map:wallTexture,\n   side:DoubleSide\n  })\n)\nsouthWall.rotateY(Math.PI/2)\nsouthWall.position.set(50,20,0)\n\nconst eastWall:Mesh=new Mesh(\n  new PlaneBufferGeometry(100, 40),\n  new MeshStandardMaterial({\n   map:wallTexture,\n   side:DoubleSide\n  })\n)\n\neastWall.position.set(0,20,50)\n\n\nbasicObjectList.push(stage)","import {\n  AxesHelper,\n  GridHelper,\n  Object3D,\n  PointLightHelper,\n  SpotLightHelper\n} from 'three'\n\nimport { pointLight, spotLight } from './Tlights'\n\nexport const helperList: Object3D[] = []\n\nconst axesHelper: AxesHelper = new AxesHelper(500)\nconst gridHelper: GridHelper = new GridHelper(500, 20, 'rgb(200, 200, 200)', 'rgb(100, 100, 100)')\n\n\nconst pointLightHelper: PointLightHelper = new PointLightHelper(pointLight, pointLight.distance, pointLight.color)\n\nconst spotLightHelper: SpotLightHelper = new SpotLightHelper(spotLight, spotLight.color)\n\n  // helperList.push(axesHelper)","\ninterface IWindow extends Window {\n    webkitSpeechRecognition: any;\n}\ninterface VCEvent {\n    keyword: string,\n    callback: Function\n}\nconst { webkitSpeechRecognition }: IWindow = <IWindow><unknown>window;\nexport class VCAPI {\n    private recognition = new webkitSpeechRecognition();\n    private listenedEvent: Array<VCEvent> = [];\n    constructor() {\n        this.recognition.continuous = true;\n        this.recognition.lang = 'cmn-Hans-CN'; //普通话 (中国大陆)\n        this.recognition.interimResults = true;\n        let last_ten_words = '';\n        let find = false;\n        this.recognition.onresult = (e: any) => {\n            let resultIndex = e.resultIndex\n            let str = e.results[resultIndex][0].transcript\n            console.log(str)\n            if (!str.length||find) return\n            let len = str.length\n            last_ten_words = str.substr(len - 10 ? len - 10 : 0, len - 10 ? 10 : len)\n            this.listenedEvent.some(e => {\n                const { keyword, callback } = e;\n                let start = last_ten_words.indexOf(keyword);//获得字符串的开始位置\n\n                if (start >= 0) {\n                    find=true;\n                    setTimeout(() => {\n                        find=false\n                    }, 2000);\n                    callback()\n                }\n            })\n            //console.log(e)\n        }\n    }\n    stop = () => {\n        this.recognition.stop()\n    }\n    start = () => {\n        this.recognition.start()\n    }\n    bindListening = (keyword: string, callback: Function) => {\n        this.listenedEvent.push({\n            keyword,\n            callback\n        })\n    }\n}","// import {\n//   sendRTCEvent,\n//   sendUserEvent\n// } from './RTCUtils'\n// import socket from \"../Socket/index\"\n// import ee from '../eventEmitter'\nimport {\n  CLIENT_RTC_EVENT,\n  SERVER_RTC_EVENT,\n\n  CLIENT_USER_EVENT,\n  SERVER_USER_EVENT,\n  CLIENT_USER_EVENT_LOGIN,\n  SERVER_USER_EVENT_UPDATE_USERS,\n  CLIENT_USER_EVENT_SEND_MESSAGE,\n  SIGNALING_OFFER,\n  SIGNALING_ANSWER,\n  SIGNALING_CANDIDATE,\n} from '../constant'\nimport { Socket } from 'socket.io-client'\n\ninterface onlineUserT {\n  userName: String,\n  roomID: any\n}\nexport class RTCEngine {\n  private peerList:any={}\n  private videoList:any={}\n  private userName?: string \n  private local_video!: HTMLVideoElement\n  private is_audience: Boolean = false\n  private socket!: Socket\n  private ee: any\n  public onnewuserenterroom: any\n  public onnewvideoloaded:any\n  public onuserleaveroom:any\n  public onuserinteraction:any\n  constructor(socket: Socket, ee: any) {\n    // this.userName = userName;\n    this.ee = ee;\n    this.socket = socket;\n    // this.is_audience = is_audience;\n    // this.local_video = local_video;\n    socket.on(\"FIRSTASKLIST\", (payload) => {\n      console.log('User first time get all online users list')\n      let data = JSON.parse(payload)\n      this.onnewuserenterroom && this.onnewuserenterroom(data);\n      this.initRTC(data.onlineUsers)\n    })\n    socket.on('user_leave',(leaveName:string)=>{\n      console.log('in rtc ')\n      this.onuserleaveroom&&this.onuserleaveroom(leaveName)\n    })\n    socket.on('INTERACTION_EVENT',(from:string)=>{\n      console.log(from,'shoot')\n      this.onuserinteraction&& this.onuserinteraction(from)\n    })\n    socket.on(SERVER_USER_EVENT, (msg) => {\n      const { type, payload } = msg\n      switch (type) {\n        case SERVER_USER_EVENT_UPDATE_USERS:\n          this.onnewuserenterroom && this.onnewuserenterroom(payload);\n          break;\n      }\n    })\n    socket.on(SERVER_RTC_EVENT, async (msg) => {\n      const { type } = msg;\n      switch (type) {\n        case SIGNALING_OFFER:\n          this.handleReceiveOffer(msg);\n          break;\n        case SIGNALING_ANSWER:\n          await this.handleReceiveAnswer(msg);\n          break;\n        case SIGNALING_CANDIDATE:\n          await this.handleReceiveCandidate(msg);\n          break;\n      }\n    });\n  }\n  private async initRTC(onlineUsers: Array<onlineUserT>) {\n    const localVideo = this.local_video\n    const is_audience = this.is_audience;\n    if (onlineUsers.length > 1) {\n\n      onlineUsers.forEach((onlineUser: { userName: any; }) => {\n        const { userName: rtcUserName } = onlineUser\n        if (!this.peerList[rtcUserName] && rtcUserName !== this.userName) {\n\n          let pc: RTCPeerConnection = this.createPeerConnection(rtcUserName)\n          this.peerList[rtcUserName] = pc\n          if (!is_audience) {\n            const mediaStream = this.local_video.srcObject as MediaStream\n            mediaStream.getTracks().forEach(track => {\n              pc.addTrack(track, mediaStream);\n            });\n          }\n\n        }\n      })\n\n    }\n\n  }\n\n  login(user_name: string, room_id: string, video?: HTMLVideoElement) {\n    if (video) {\n      this.is_audience = false;\n      this.local_video = video;\n    } else {\n      this.is_audience = true\n    }\n    this.userName=user_name\n    const msg = {\n      type: CLIENT_USER_EVENT_LOGIN,\n      payload: {\n        loginName: user_name,\n        roomID: 100\n      }\n    }\n    this.socket.emit(CLIENT_USER_EVENT, JSON.stringify(msg));\n  }\n  private createPeerConnection(remoteUserName: string) {\n    const { userName } = this\n    const iceConfig = {\n      \"iceServers\": [\n        { url: 'stun:stun.ekiga.net' },\n        { url: 'turn:turnserver.com', username: 'user', credential: 'pass' }\n      ]\n    } as unknown as RTCConfiguration\n\n    let pc: RTCPeerConnection = new RTCPeerConnection(iceConfig);\n\n\n    const onnegotiationneeded=async (e: any)=>{\n\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer); // TODO 错误处理\nconsole.log(pc.localDescription,'996 sdp')\n      this.sendRTCEvent({\n        type: SIGNALING_OFFER,\n        payload: {\n          from: userName,\n          target: remoteUserName,\n          sdp: pc.localDescription // TODO 直接用offer？\n        }\n      });\n    }\n    const onicecandidate=async (evt: any)=> {\n      if (evt.candidate) {\n        //log(`onicecandidate.`);\n\n       this.sendRTCEvent({\n          type: SIGNALING_CANDIDATE,\n          payload: {\n            from: userName,\n            target: remoteUserName,\n            candidate: evt.candidate\n          }\n        });\n      }\n    }\n\n\n    const ontrack=(evt: any)=>{\n      let remoteVideo: HTMLVideoElement | null = this.videoList[remoteUserName]\n\n      if (remoteVideo) {\n        if (remoteVideo.srcObject) return\n        remoteVideo.srcObject = evt.streams[0];\n      } else {\n        remoteVideo = document.createElement('video');\n        remoteVideo.srcObject = evt.streams[0];\n        remoteVideo.muted = true;\n        remoteVideo.autoplay = true;\n        remoteVideo.playsInline = true;\n        remoteVideo.width = 640;\n        remoteVideo.height = 480;\n        this.videoList[remoteUserName]=remoteVideo;\n        remoteVideo.play()\n        this.onnewvideoloaded&&this.onnewvideoloaded({\n          video:remoteVideo,\n          video_name:remoteUserName\n        })\n        console.log(110,remoteUserName)\n        // ee.emit(\"VIDEO_READY\", remoteVideo, remoteUserName as string)\n      }\n\n    }\n\n    pc.onnegotiationneeded = onnegotiationneeded;\n    pc.onicecandidate = onicecandidate;\n    pc.ontrack = ontrack;\n    return pc;\n  }\n  async handleReceiveOffer(msg: any) {\n    //log(`receive remote description from ${msg.payload.from}`);\n\n    // 设置远端描述\n    //const remoteDescription = new RTCSessionDescription(msg.payload.sdp);\n    const remoteDescription = msg.payload.sdp;\n    let remoteUser = msg.payload.from;\n    console.log(remoteUser,msg,'120')\n    if (this.peerList[remoteUser]) return\n    let pc: RTCPeerConnection = this.createPeerConnection(remoteUser);\n    this.peerList[remoteUser] = pc\n\n    await pc.setRemoteDescription(remoteDescription); // TODO 错误处理\n\n    // 本地音视频采集\n    if(!this.is_audience&&this.local_video){\n      const mediaStream = this.local_video.srcObject as MediaStream;\n      mediaStream.getTracks().forEach(track => {\n        pc.addTrack(track, mediaStream);\n      });\n    }\n\n    const answer = await pc.createAnswer(); // TODO 错误处理\n    await pc.setLocalDescription(answer);\n    this.sendRTCEvent({\n      type: SIGNALING_ANSWER,\n      payload: {\n        sdp: answer,\n        from: this.userName,\n        target: remoteUser\n      }\n    });\n  }\n  async handleReceiveAnswer(msg: any) {\n    // log(`receive remote answer from ${msg.payload.from}`);\n\n    // const remoteDescription = new RTCSessionDescription(msg.payload.sdp);\n    const peerList = this.peerList\n    const remoteDescription = msg.payload.sdp;\n    let remoteUser = msg.payload.from;\n    if (peerList[remoteUser].signalingState !== \"stable\")\n      await peerList[remoteUser].setRemoteDescription(remoteDescription); // TODO 错误处理\n  }\n\n  async handleReceiveCandidate(msg: any) {\n    //   log(`receive candidate from ${msg.payload.from}`);\n    this.peerList[msg.payload.from].addIceCandidate(msg.payload.candidate); // TODO 错误处理\n  }\n\n  private sendRTCEvent(msg: any){\n    this.socket&&this.socket.emit(CLIENT_RTC_EVENT, JSON.stringify(msg));\n  }\n  private sendUserEvent(msg: any){\n    this.socket&&this.socket.emit(CLIENT_USER_EVENT, JSON.stringify(msg));\n}\n}\n\n\n\n","import React, { Component, useState, useEffect } from 'react';\nimport socket from \"./modules/Socket/index\"\nimport ee from './modules/eventEmitter'\nimport './App.css';\nimport ChatBox from \"./components/ChatBox\"\nimport Tips from './components/Tips';\nimport ToggleBtn from './components/ToggleBtn';\nimport ParticipantsList from './components/ParticipantsList';\nimport { TEngine } from \"./modules/TEngine/TEngine\"\nimport { FaceAPI } from './modules/FaceAPI/FaceAPI';\nimport { HandAPI } from './modules/HandAPI/HandAPI';\nimport { basicObjectList } from './modules/TEngine/TBasicObject'\nimport { LightsList } from './modules/TEngine/Tlights'\nimport { helperList } from './modules/TEngine/THelper'\nimport { useLocation, useParams } from 'react-router-dom'\n// @ts-ignore\nimport * as humanseg from '@paddlejs-models/humanseg';\nimport { VCAPI } from './modules/VoiceControlAPI/VCAPI'\nimport { RTCEngine } from './modules/RTCEngine/RTCEngine';\nimport {\n  CLIENT_RTC_EVENT,\n  SERVER_RTC_EVENT,\n  CLIENT_USER_EVENT_INTERACTION,\n  CLIENT_USER_EVENT,\n  SERVER_USER_EVENT,\n  CLIENT_USER_EVENT_LOGIN,\n  SERVER_USER_EVENT_UPDATE_USERS,\n  CLIENT_USER_EVENT_SEND_MESSAGE,\n  SIGNALING_OFFER,\n  SIGNALING_ANSWER,\n  SIGNALING_CANDIDATE,\n} from './modules/constant'\nconst ROOMID = 100\n\nfunction App() {\n  const location: any = useLocation()\n  const { isAudience, browserType } = location.state;\n  const sceneList = {\n    '林间晨光': 'autumn_forest_04_1k',\n    '黄昏郊野': 'railway_bridges_1k',\n    '宁静湖畔': 'bell_park_pier_1k'\n  }\n\n  const [participantsList, setParticipantsList] = useState<Array<String>>([\"\"])\n  const [userName, setUserName] = useState<string>(location.state.username)\n\n  const [curScene, setCurScene] = useState('林间晨光')\n  let peerList: any = {};\n  let videoList: any = {};\n\n\n\n  //\n  useEffect(() => {\n    async function start() {\n      let client = new RTCEngine(socket, ee);\n      client.onnewuserenterroom = (e: any) => {\n        console.log('有人来了', e);\n        setParticipantsList(e.onlineUsers.map((u: any) => u.userName))\n      }\n      client.onnewvideoloaded = (e: any) => {\n        console.log('视频准备好了', e)\n        const { video, video_name } = e\n        ee.emit(\"VIDEO_READY\", video, video_name);\n      }\n      client.onuserleaveroom = (e: any) => {\n        ee.emit('USER_LEAVE', e);\n      }\n      client.onuserinteraction=(e:any)=>{\n        ee.emit('START_LOVE',e);\n      }\n      await new Promise((resolve, reject) => {\n        if (isAudience) {\n          (document.querySelector('.tips-wrapper') as HTMLDivElement).style.display = 'none';\n          resolve(0);\n        }\n        else {\n          (document.querySelector('.tips-enter-btn') as HTMLDivElement).onclick = () => {\n            (document.querySelector('.tips-wrapper') as HTMLDivElement).style.display = 'none';\n            resolve(0);\n          }\n        }\n      })\n\n      client.login(userName, '100', isAudience ? undefined : await createLocalVideo())\n\n    }\n    start()\n  }, [])\n  async function createLocalVideo() {\n    try {\n      await humanseg.load(true, true);\n    } catch (error) {\n      console.log('in humanseg', error)\n    }\n    const mediastream = await navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    });\n    let w = mediastream.getVideoTracks()[0].getSettings().width as number / 2;\n    let h = mediastream.getVideoTracks()[0].getSettings().height as number / 2;\n    const hc = document.createElement('canvas');\n    hc.width = w;\n    hc.height = h;\n    const mc = document.createElement('canvas');\n    mc.width = w;\n    mc.height = h;\n    const bc = document.createElement('canvas');\n    bc.width = w;\n    bc.height = h;\n    const local_video = document.createElement('video');\n    local_video.muted = true;\n    local_video.autoplay = true;\n\n    local_video.width = w;\n    local_video.height = h;\n    const segment_video = document.createElement('video');\n    segment_video.width = w;\n    segment_video.height = h;\n    local_video.srcObject = mediastream;\n    local_video.play();\n    segment_video.srcObject = hc.captureStream();\n    segment(local_video, hc, mc, bc, () => { });\n    ee.emit(\"LOCAL_VIDEO\",local_video)\n    segment_video.onloadeddata = () => {\n      console.log('seg loaded')\n      segment_video.play();\n      ee.emit(\"VIDEO_READY\", segment_video, userName as string)\n    }\n    return segment_video\n  }\n\n  function cleanGreen(v: HTMLVideoElement, rv: HTMLVideoElement) {\n    const displayCanvasEl = document.createElement('canvas');\n    const c=document.createElement('canvas');\n    c.width=320;\n    c.height=240;\n    // displayCanvasEl.classList.add('test')\n   // rv.srcObject=c.captureStream();\n    // document.body.appendChild(displayCanvasEl)\n    rv.srcObject = displayCanvasEl.captureStream();\n    const gl = displayCanvasEl.getContext(\"webgl\") as WebGLRenderingContext;\n    const vs = gl.createShader(gl.VERTEX_SHADER) as WebGLShader;\n    gl.shaderSource(vs, 'attribute vec2 c; void main(void) { gl_Position=vec4(c, 0.0, 1.0); }');\n    gl.compileShader(vs);\n    const fs = gl.createShader(gl.FRAGMENT_SHADER) as WebGLShader;\n    gl.shaderSource(fs, document.getElementById(\"fragment-shader\")!.innerText);\n    gl.compileShader(fs);\n    const prog = gl.createProgram() as WebGLProgram;\n    gl.attachShader(prog, vs);\n    gl.attachShader(prog, fs);\n    gl.linkProgram(prog);\n    gl.useProgram(prog);\n\n    const vb = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vb);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, 1, -1, -1, 1, -1, 1, 1]), gl.STATIC_DRAW);\n\n    const coordLoc = gl.getAttribLocation(prog, 'c');\n    gl.vertexAttribPointer(coordLoc, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(coordLoc);\n\n    gl.activeTexture(gl.TEXTURE0);\n    const tex = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, tex);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n    const texLoc = gl.getUniformLocation(prog, \"tex\");\n    const texWidthLoc = gl.getUniformLocation(prog, \"texWidth\");\n    const texHeightLoc = gl.getUniformLocation(prog, \"texHeight\");\n    function processFrame(now: any, metadata: any) {\n      displayCanvasEl.width = metadata.width;\n      displayCanvasEl.height = metadata.height;\n      gl.viewport(0, 0, metadata.width, metadata.height);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, v);\n      gl.uniform1i(texLoc, 0);\n      gl.uniform1f(texWidthLoc, metadata.width);\n      gl.uniform1f(texHeightLoc, metadata.height);\n      gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\n      //@ts-ignore\n      v.requestVideoFrameCallback(processFrame);\n      //c.getContext('2d')?.clearRect(0,0,320,240)\n       //c.getContext('2d')?.drawImage(v,0,0);\n     \n    }\n    //@ts-ignore\n    v.requestVideoFrameCallback(processFrame);\n\n    console.log('执行了')\n  }\n\n  //3d场景生成\n  useEffect(() => {\n\n    const threeTarget = document.querySelector(\".conference-webgl-wrapper\")\n    const TE = new TEngine(threeTarget as HTMLElement, isAudience, browserType)\n\n    TE.loadRoom(() => {\n      document.querySelector('.mask')?.classList.remove('mask');\n    })\n\n    //TE.loadHumanModel()\n    TE.addObject(...basicObjectList)\n    TE.addObject(...LightsList)\n    TE.addObject(...helperList)\n    TE.loadLove()\n    ee.on(\"TRIGGER_GESTURE\", () => {\n     \n      let targetName=TE.getCentralUser();\n      targetName&&TE.startLove(\"&&SELF\",targetName)\n      let msg={\n        type:CLIENT_USER_EVENT_INTERACTION,\n        payload:{\n          from:userName,\n          to:targetName\n        }\n      }\n      targetName&&socket.emit(CLIENT_USER_EVENT,JSON.stringify(msg))\n    })\n\n    ee.on(\"CHANGE_SCENE\", (url: string) => {\n      TE.changeScene(url);\n    });\n    ee.on(\"ADJUST_BRIGHTNESS\", (type: string) => {\n      TE.adjustBrightness(type)\n    })\n    ee.on('USER_LEAVE', (leaveName: string) => {\n      TE.removeUserVideo(leaveName);\n    })\n    ee.on('SWITCH_VR',(vr:boolean)=>{\n      TE.switchVRview(vr);\n    })\n    ee.on(\"START_LOVE\",(from:string)=>{\n      TE.startLove(from,userName);\n    })\n    ee.on(\"VIDEO_READY\", (video: HTMLVideoElement, name: string) => {\n      //       const canvas = document.createElement('canvas');\n      console.log(video, name)\n      const resultVideo = document.createElement('video')\n      resultVideo.width = video.width;\n      resultVideo.muted = true;\n      resultVideo.height = video.height;\n      cleanGreen(video, resultVideo);\n      resultVideo.onloadeddata = () => {\n        resultVideo.play()\n        TE.addUserVideo(resultVideo, name)\n      }\n    })\n    window.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode === 27) {\n\n        TE.disableControls()\n\n      } else if (e.keyCode === 17) {\n        TE.enableControls()\n      }\n    })\n  }, [])\n\n  //语音识别控制\n  useEffect(() => {\n    //@ts-ignore\n    if (window.webkitSpeechRecognition) {\n      let VC = new VCAPI()\n      VC.start()\n      console.log('vc open')\n      VC.bindListening('亮一点', () => {\n        console.log('捕捉到了>>>亮一点')\n        ee.emit('ADJUST_BRIGHTNESS', 'brighter')\n      })\n      VC.bindListening('暗一点', () => {\n        console.log('捕捉到了>>>暗一点')\n        ee.emit('ADJUST_BRIGHTNESS', 'darker')\n      })\n    }\n\n  }, [])\n\n  //手势识别\n  useEffect(() => {\n    let hd=new HandAPI();\n    ee.on(\"LOCAL_VIDEO\", async (video: HTMLVideoElement) => {\n    \n      (await hd.createDetector()).bindVideo(video).onDetect(() => {\n        ee.emit(\"TRIGGER_GESTURE\")\n        console.log('***&&&')\n      })\n\n    })\n    ee.on('SWITCH_DETECT',(e:boolean)=>{\n      hd.enable=e\n    })\n  }, [])\n\n  async function segment(video: HTMLVideoElement, humanCanvas: HTMLCanvasElement, maskCanvas: HTMLCanvasElement, backgroundCanvas: HTMLCanvasElement, cb = (e: any) => { }) {\n    async function cutout() {\n      try {\n        const { data } = await humanseg.getGrayValue(video);\n        humanseg.drawHumanSeg(data, humanCanvas);\n\n        // humanseg.drawMask(data,maskCanvas,backgroundCanvas);\n        // cb(data)\n      } catch (error) {\n        console.log(error);\n      }\n\n      requestAnimationFrame(cutout)\n    }\n    // document.body.appendChild(humanCanvas);\n    humanCanvas.classList.add('testa')\n    cutout()\n  }\n\n\n  return (\n    <div className=\"App sm-app\">\n      <div className='app-main-box sm-app-main-box'>\n        <div className=\"conference-header-wrapper\" >\n          <div className='header-item' onClick={() => {\n\n          }}>欢迎{userName}</div>\n          <div className='header-item dropdown'>\n            <h5>{curScene}</h5>\n            <div className='dropdown-content'>\n              {\n                Object.keys(sceneList).map((key) => {\n                  return (\n                    <p onClick={() => {\n                      setCurScene(key);\n                      //@ts-ignore\n                      ee.emit('CHANGE_SCENE', sceneList[key])\n                    }}>{key}</p>\n                  )\n                })\n              }\n            </div>\n\n          </div>\n          <div className='header-item'>\n            <ToggleBtn l={'VR'} r={\"2d\"} onToggle={(vr:any)=>{\n              ee.emit('SWITCH_VR',vr)\n            }}/>\n          </div>\n          <div className='header-item'>\n            <ToggleBtn l={'🤞🏿'} r={\"🚫\"} onToggle={(e:any)=>{\n              ee.emit('SWITCH_DETECT',e)\n            }}/>\n          </div>\n        </div>\n        <div className=\"conference-body-wrapper mask\" data-loadinfo=\"三维会议室加载中\">\n          <Tips ></Tips>\n          <div className=\"conference-webgl-wrapper\"></div>\n\n        </div>\n        <div className=\"conference-footer-wrapper\" onClick={() => {\n\n        }}>\n          <div className='function-btn selected' onClick={(e) => {\n            const dom = e.target as HTMLDivElement;\n            const selected = dom.classList.contains('selected');\n            const chatBoxDom = document.querySelector('.conference-textchat-wrapper') as HTMLDivElement;\n            const addSpace = document.querySelector('.userlist-btn')?.classList.contains('selected') && !selected;\n            addSpace && chatBoxDom.classList.add('add-space');\n            !addSpace && chatBoxDom.classList.remove('add-space');\n            console.log(addSpace)\n            if (selected) {\n              dom.classList.remove('selected');\n              chatBoxDom.classList.add('hide');\n\n            } else {\n              dom.classList.add('selected');\n\n              chatBoxDom.classList.remove('hide');\n\n            }\n          }}>\n            💬\n          </div>\n          <div className='userlist-btn function-btn ' onClick={(e) => {\n            const dom = e.target as HTMLDivElement;\n            const selected = dom.classList.contains('selected');\n            const listDom = document.querySelector('.conference-participants-list-wrapper') as HTMLDivElement;\n            const chatBoxDom = document.querySelector('.conference-textchat-wrapper') as HTMLDivElement;\n            const addSpace = !chatBoxDom.classList.contains('hide') && !selected;\n            addSpace && chatBoxDom.classList.add('add-space');\n            !addSpace && chatBoxDom.classList.remove('add-space');\n            if (selected) {\n              dom.classList.remove('selected');\n              listDom.classList.add('hide');\n            } else {\n              dom.classList.add('selected');\n              listDom.classList.remove('hide');\n            }\n          }} >\n            👥\n          </div>\n        </div>\n      </div>\n      <div className='app-function-box sm-app-function-box'>\n        <div className=\"conference-participants-list-wrapper sm-conference-participants-list-wrapper hide\">\n          <ParticipantsList participantsList={participantsList} />\n        </div>\n        <div className=\"conference-textchat-wrapper sm-conference-textchat-wrapper\">\n          <ChatBox userName={userName} />\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\nexport default App;\n","export function BrowserType() {\n    const ua = navigator.userAgent.toLowerCase();\n    const testUa = (regexp: RegExp) => regexp.test(ua);\n    const testVs = (regexp: { [Symbol.match](string: string): RegExpMatchArray | null; }) => (ua.match(regexp) + \"\").replace(/[^0-9|_.]/ig, \"\").replace(/_/ig, \".\");\n    // 接上以上if...else条件判断\n    let system = \"unknown\";\n    if (testUa(/oculus|quest/ig)) {\n        system = \"oculus\";\n    } else if (testUa(/windows|win32|win64|wow32|wow64/ig)) {\n        system = \"windows\"; // window系统\n    } else if (testUa(/macintosh|macintel/ig)) {\n        system = \"osx\"; // osx系统\n    } else if (testUa(/x11/ig)) {\n        system = \"linux\"; // linux系统\n    } else if (testUa(/android|adr/ig)) {\n        system = \"android\"; // android系统\n    } else if (testUa(/ios|iphone|ipad|ipod|iwatch/ig)) {\n        system = \"ios\"; // ios系统\n    }\n\n    // ......\n    // 获取到system、systemVs、platform、engine、engineVs、supporter、supporterVs、shell、shellVs\n    return system\n}","import React, { useEffect, useState } from 'react'\nimport './Login.css'\n// @ts-ignore\nimport { useNavigate } from 'react-router-dom'\nimport { BrowserType } from './utils'\nimport {\n  CLIENT_RTC_EVENT,\n  SERVER_RTC_EVENT,\n\n  CLIENT_USER_EVENT,\n  SERVER_USER_EVENT,\n  CLIENT_USER_EVENT_LOGIN,\n  SERVER_USER_EVENT_UPDATE_USERS,\n  CLIENT_USER_EVENT_SEND_MESSAGE,\n  SIGNALING_OFFER,\n  SIGNALING_ANSWER,\n  SIGNALING_CANDIDATE,\n} from './modules/constant'\nconst ROOMID = 100;\nconst browserType=BrowserType()\nfunction Login() {\n  const to = useNavigate()\n  return (\n    <div className='login-wrapper'>\n      <div className='login-form-wrapper'>\n        <div className='title'>mushroom</div>\n        <div className='login-form'>\n          <div className='form-option'>\n            <h4>用户名</h4>\n            <input type=\"text\" id='name' placeholder='输入用户名' required />\n          </div>\n          <div className='form-option' style={{display:'none'}}>\n            <h6>房间号</h6>\n            <input type=\"text\" id='num' placeholder='输入房间号' required />\n          </div>\n          <div className={`form-option radio-option ${browserType==='oculus'?'hiden':''}`} >\n            <span>观众访问？</span>\n            <input type=\"radio\" id='auth' name='auth' value='true' />\n          </div>\n\n          <button className=\"btn\"\n            onClick={() => {\n              const username = (document.getElementById('name') as HTMLInputElement).value;\n              const roomid = (document.getElementById('num') as HTMLInputElement).value;\n              const isAudience =browserType==='oculus'|| (document.getElementById('auth') as HTMLInputElement).checked;\n\n              //  userLogin(username)\n              to('/room', {\n                state: {\n                  username,\n                  roomid,\n                  isAudience,\n                  browserType\n                }\n              })\n\n            }}>\n            进入房间\n          </button>\n          <div className='hide' >\n            <div>{BrowserType()}</div>\n            <div>{\n              //@ts-ignore\n              `webkitSpeechRecognition ${window.webkitSpeechRecognition ? 'ok' : 'no'}`\n            }\n            </div>\n            <div>\n              {\n                //@ts-ignore\n                `requestAnimationFrame ${window.requestAnimationFrame ? 'ok' : 'no'}`\n              }\n\n            </div>\n            <div>\n              {\n                //@ts-ignore\n               `requestVideoFrameCallback ${document.createElement('video').requestVideoFrameCallback ? 'ok' : 'no'}`\n              }\n            </div>\n          </div>\n        </div>\n\n\n      </div>\n      <div className='login-img'>\n        <div className='info'>\n          <div className='title'>mushroom</div>\n          <div>\n            三维视频会议室\n          </div>\n        </div>\n        <img src=\"/viewfile.png\" alt=\"#\" />\n\n      </div>\n      <div className=\"icp\">\n      <a href=\"https://beian.miit.gov.cn/\" target=\"_blank\">湘ICP备2022006815号</a>\n      </div>\n    </div>\n  )\n}\nexport default Login\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// @ts-ignore\nimport { BrowserRouter as Router, Route, Link, Routes } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport Login from './Login';\n\n\nReactDOM.render(\n\n  <Router>\n    <Routes>\n      <Route path='/' element={<Login/>}/>\n      <Route path='/room' element={<App/>}/>\n    </Routes>\n  </Router>\n  ,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}